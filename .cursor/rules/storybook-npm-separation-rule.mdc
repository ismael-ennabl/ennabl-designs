---
alwaysApply: true
---
- description: >
    This project contains React components in `src/` that are used in both Storybook and
    an npm package. Maintain a clean separation so Storybook-related code is never included
    in the npm build.

- directories:
    src: "Source code for npm package. All reusable components live here."
    dist: "Build output for npm package. Generated by Rollup. Never manually edited."
    .storybook: "Storybook configuration files. Never included in npm build."
    stories: "Storybook demo files. Never included in npm build."

- goal:
    - Keep Storybook setup for local documentation and development only.
    - Build components from `src/` into `dist/` for npm publishing.
    - Never publish `.storybook/` or `stories/` to npm.
    - Maintain a clean `src/index.js` that exports all public components.
    - Ensure React is a peerDependency, not bundled.

- instructions:
    - When creating components, place them in `src/` and export from `src/index.js`.
    - Do not import from `.storybook/` or `stories/` inside `src/`.
    - Use Rollup build config to output both CommonJS and ESM builds to `dist/`.
    - Add `.npmignore` or `files` in `package.json` to avoid publishing Storybook files.
    - Keep devDependencies (e.g., Storybook addons) out of the npm bundle.

- references:
    - https://rollupjs.org/guide/en/
    - https://storybook.js.org/docs/react
    - https://docs.npmjs.com/creating-and-publishing-unscoped-public-packages
